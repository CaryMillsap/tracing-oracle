-- test for v$diag_trace_file_contents truncation

/* 

https://forums.oracle.com/ords/apexds/post/extend-v-diag-trace-file-contents-so-multiple-chunks-of-a-l-0490

- Martin Berger and Jeff Holt discovered that Oracle:
  - segments long lines into chunks
  - the chunks all have the same line number
  - there is nothing exposed in v$diag_trace_file_contents to allow reliable sorting of the chunks

- Cary Millsap and Jeff Holt discovered that Oracle:
  - will truncate long SELECT clause constants

*/


-- Cary Millsap test

-- non-ADB
-- The SELECT string has 4,000 dots in it, and some extra characters at its beginning and end.
@trace-on
select 'BEGIN 4,000 DOTS................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................END'
from dual;
@trace-off
@my-trace-file
@my-trace-content
-- In V$DIAG_TRACE_FILE_CONTENTS, the "END" at the tail of the SELECT string is truncated.

-- ADB
-- The SELECT string has 4,000 dots in it, and some extra characters at its beginning and end.
alter session set sql_trace=true;
select 'BEGIN 4,000 DOTS................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................END'
from dual;
alter session set sql_trace=false;
@adb/my-trace-content
-- In SESSION_CLOUD_TRACE, the "END" at the tail of the SELECT string is truncated.

